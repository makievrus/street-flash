var _i_=this._i_||function(){},_r_=this._r_||function(e){return e},_sp_=this._sp_||function(e){B.et.customGoal("cDPPESHbfNFVTAYZSQDZET",1),B.reportError({message:"SPDR function called - "+e},"SPDR")};_i_("a9a:f9ecb3c2"),B.define("hotel/utils/rooms-selected-copy",function(e){return _i_("a9a:be6dbbf5"),_r_(function(e,t){_i_("a9a:9863e5ee");var o,a="<strong>"+t+"</strong>";switch(1<e.length?"0":e[0]||"0"){case"29":o="hp_book_now_summary_holidayhomes";break;case"31":o="hp_book_now_summary_villas";break;case"1":o="hp_book_now_summary_apartments";break;case"17":o="hp_book_now_summary_chalet";break;case"19":o="hp_book_now_summary_bungalow";break;case"26":o="hp_book_now_summary_dorm_beds"}return _r_(o?B.jstmpl.translations(o,t,{b_count:a}):B.jstmpl.translations("hp_book_now_summary_room",t,{number_rooms:a}))})}),B.define("component/hotel/new-rooms-table/cheapest-seen-block",function(e,t,o){_i_("a9a:fa26493f");var n=e("jquery"),a=e("component"),r=B.require("search-config");function i(o,e){if(_i_("a9a:b43661b8"),r.isGroupSearch)return _r_();var t=[B.env.b_ufi,B.env.b_checkin_date,B.env.b_checkout_date,+r.adults].join("_"),a={method:"GET",dataType:"json",url:"/is_cheapest",data:{hotel_id:B.env.b_hotel_id,search_key:t}};n.ajax(a).done(function(e){var t;_i_("a9a:73b2ad0f"),!e.b_first&&e.is_the_cheapest?((t=o.closest("tr").prev()).find(".hprt-table-cell-price").addClass("hprt-table-cheapest-block-arrow"),o.addClass("hprt-table-cheapest-block-banner-active"),o.closest("tr.js-hprt-cheapest-block-row").addClass("hprt-cheapest-block-row-active"),t.is(".js-hprt-table-cheapest-block")&&t.addClass("hprt-table-cheapest-block-active")):((t=o.closest("tr").prev()).find(".hprt-table-cell-price").removeClass("hprt-table-cheapest-block-arrow"),o.removeClass("hprt-table-cheapest-block-banner-active"),o.closest("tr.js-hprt-cheapest-block-row").removeClass("hprt-cheapest-block-row-active"),t.is(".js-hprt-table-cheapest-block")&&t.removeClass("hprt-table-cheapest-block-active")),_r_()}),_r_()}o.exports=a.extend({init:function(){_i_("a9a:53f49709");var e=this.$el;i(e),n(window).bind("focus",function(){_i_("a9a:fb03e730"),i(e),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/room-upgrade-for-genius-block",function(e,t,o){_i_("a9a:80e13554");var a=e("component");o.exports=a.extend({init:function(){_i_("a9a:f2ca0def");var e,t,o=this.$el;e=o,_i_("a9a:0cec8fd3"),(t=e.closest("tr").prev()).find(".hprt-table-cell-price").addClass("hprt-table-cheapest-block-arrow"),t.find(".hprt-table-cell").not($(".hprt-table-cell-roomtype")).addClass("hprt-remove-top-border"),t.hasClass("hprt-table-last-row")&&e.addClass("rm-upgrd-block-border"),_r_(),o.closest("tr").prev().removeClass("hprt-table-cheapest-block"),o.closest("tr").prev().find(".hprt-table-cell-roomtype.-first").not($(".-last")).removeClass("droom_seperator"),$(".room-upgrade-row").find("td").removeClass("droom_seperator");var a=$(".room-upgrade-row");a.next().hasClass("js-hprt-room-upgrade-block-row")&&a.find("td").css("border-bottom","0"),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/lightbox",function(e,t,o){_i_("a9a:f7ba7410");var a=e("component"),b=e("et"),p=e("jquery"),m=e("lightbox"),f=e("events"),u=B.require("ga-tracker"),g=e("hotel/rooms_table/lightbox/gallery"),_=e("querystring"),n={},r=0,v=!1,i=!1,s=!1,l=!1;function k(e){if(_i_("a9a:fdaa627b"),(!i||!s||!l)&&e.data("room-id")){var t="RD"+e.data("room-id");n[t]?n[t]+=1:(n[t]=1,r+=1,i||(b.goal("hp_rt_roomtype_lightbox_opened"),i=!0)),!s&&1<n[t]&&(b.goal("hp_lightbox_opened_more_than_once"),s=!0),!l&&1<r&&(b.goal("hp_lightbox_opened_for_different_rooms"),l=!0)}_r_()}function y(a){return _i_("a9a:c8c5a058"),_r_(function(){_i_("a9a:c3814b3f");var e=a.data("room-id"),t=p("[name=RD"+e+"]").parents(".hprt-table-cell").first();if(!B.feature||!B.feature.transition||!B.env.b_has_maxotel_rooms)return _r_();if(!t.length)return _r_();!function(e){_i_("a9a:1761391a");var t="hprt-table-cell-roomtype--highlight";e.addClass(t),setTimeout(function(){_i_("a9a:7604d58c"),e.removeClass(t),_r_()},500),_r_()}(t),function(e){_i_("a9a:bf855915");var t="roomType--highlight hprt-table-cell-roomtype--active";p(".hprt-table").find(".hprt-table-cell.-first").removeClass(t),e.addClass(t),_r_()}(t);var o=a.data("LightboxGallery");o&&o.pauseSlick&&o.pauseSlick(),u.trackEvent(u.hotelPageTracker,"Hotel: Lightbox closed","Click on close button"),_r_()})}function c(e,t){_i_("a9a:3e905e68");var o=e.data("room-id"),a={customWrapperClassName:"hprt-lightbox--wrapper hprt-lightbox--two_column_layout",bOverflowVisible:!0,position:"dynamic",hideCallBack:y(e),trapFocus:!0};m.show(e,a);var n=e.find(".hprt-lightbox-gallery-container");if(n.length&&!n.hasClass("slicked")){n.addClass("slicked");var r=new g(n);e.data("LightboxGallery",r),n.find('[data-gallery=""]').one("click.tracking",function(){_i_("a9a:92bf8b2f"),b.goal("hp_lb_gallery_clicks_photo"),_r_()});var i=n.find(".hp-gallery-control");i.on("click.tracking",function(e){_i_("a9a:a6deb18a"),e.hasOwnProperty("originalEvent")&&(B.et.goal("hp_lb_gallery_clicks_arrows"),i.off("click.tracking")),_r_()}),n.find("a.js-hotel-thumb").one("mouseenter.tracking click.tracking",function(){_i_("a9a:a1138f74"),B.et.goal("hp_lb_gallery_used_thumbs"),_r_()}),k(e)}else(r=e.data("LightboxGallery"))&&r.playSlick&&r.playSlick(),n.length&&k(e);var _=e.find(".inline-feedback_lightbox");if(_.length){var s=0<e.find(".b-button_primary").length,l=parseInt(_.data("opened_count"));l?l+=1:l=1,_.data("opened_count",l),(2<l||!s)&&_.removeClass("g-hidden")}f.off("feedbackInline:close_lightbox").on("feedbackInline:close_lightbox",w);var c="ZdfbAeaDDGDQVaeeBZC";e.find(".t-"+c).length&&(B.et.stage(c,1),B.et.stage(c,3)),f.trigger(B.hotel.Events.RT.LIGHTBOX_OPEN_NEW,o,e);var h=p('a.hprt-roomtype-link[href="#RD'+o+'"]');if(0<h.length){var d=h.data("room-name");d&&u.trackEvent(u.hotelPageTracker,"Hotel: Lightbox opened",d)}setTimeout(function(){_i_("a9a:6c9ae89d");try{if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var e=document.createEvent("CustomEvent");e.initEvent("scroll",!1,!1),window.dispatchEvent(e)}}catch(e){}_r_()},100),v||isNaN(o)||(v=!0,p.ajax({method:"POST",dataType:"json",url:"/hotel_lightbox_opened",data:{hotel_id:B.env.b_hotel_id,room_id:o}})),_r_()}function w(){_i_("a9a:4fb8ca4d"),m.hide(),_r_()}o.exports=a.extend({init:function(e){_i_("a9a:6c4e526f");var t=this.$el,o=t.data("room-id");!function(e,t){_i_("a9a:9ee6bc0a");var o=_.parseUrl(location.href).query.activeTab;if(!o)return _r_();var a=o.match(/room_([0-9]*)_.*/);if(!a||a.length<2)return _r_();var n=a[1];if(!n)return _r_();e==n&&t(),_r_()}(o,function(){_i_("a9a:fd8b529b"),c(t),_r_()});var a=p('.hprt-roomtype-link[data-room-id="'+o+'"]');if(!a.length)return _r_();a.click(function(e){_i_("a9a:ee950b8a"),e.preventDefault(),c(t),_r_()});var n=p(".gr-toggle-room-lightbox");if(n.length)for(var r=0;r<n.length;r++)a.attr("href")===p(n[r]).attr("href")&&p(n[r]).bind("click",function(e){_i_("a9a:b20c48b2"),e.preventDefault(),c(t),_r_()});var i=p(".main-gallery-toggle-room-lightbox");if(i.length)for(r=0;r<i.length;r++)a.data("roomId")===p(i[r]).data("roomId")&&p(i[r]).bind("click",function(e){_i_("a9a:7d6ceceb"),e.preventDefault(),c(t,p(this).data("isGroupRecommendation")),_r_()});_r_()},show:c}),_r_()}),B.define("component/hotel/new-rooms-table/summary/best-price",function(e,t,o){_i_("a9a:7a12b733");var a=e("component"),n=e("hotel/store"),r=e("jstmpl"),i=/^bbasic_\d+$/i;o.exports=a.extend({init:function(){_i_("a9a:1784929d"),n.subscribe(function(){_i_("a9a:c8b3d25e");var e=n.getState().roomsTable.js_selection,t=$(".hp_rt_attr_msg");1==B.env.b_is_group_search?2==e.fitStatus?this.toggleJackpotMessage(e,t):this.$el.hide():this.toggleJackpotMessage(e,t),_r_()}.bind(this)),_r_()},toggleJackpotMessage:function(e,t){_i_("a9a:590aacd4");var o=i.test(e.blockIDs[0]||"");if(1!=e.roomCount||2!=e.blocks[e.blockIDs[0]].b_stay_prices.length||o)0<e.roomCount?(this.$el.text(B.jstmpl.translations("hp_rt_jackpot_best_price")),this.$el.show(),t.length&&t.show()):(this.$el.hide(),this.$el.text(""),t.length&&t.hide());else{var a="",n=e.roomTypes[0];-1!==["1","29","31","17","19","26"].indexOf(n)?(a="1"===n?r.translations("pss_rt_jackpot_last_room_dehotelise_apt"):"29"===n?r.translations("pss_rt_jackpot_last_room_dehotelise_hh"):"31"===n?r.translations("pss_rt_jackpot_last_room_dehotelise_villa"):r.translations("pss_rt_jackpot_last_room_dehotelise_option"),this.$el.text(a)):this.$el.text(B.jstmpl.translations("hp_rt_jackpot_last_room")),this.$el.show(),t.length&&t.show()}_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/breakfast-included",function(e,t,o){_i_("a9a:b5cd9c4d");var a=e("component"),n=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:2ae1bbf5"),n.subscribe(function(){_i_("a9a:6a73f9b8");var t=n.getState().roomsTable.js_selection;0<t.roomCount&&t.blockIDs.every(function(e){return _i_("a9a:f24b1574"),_r_("breakfast"===t.blocks[e].b_mealplan_included_name)})?this.$el.show():this.$el.hide(),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/no-free-cancellation",function(e,t,o){_i_("a9a:0b9afeeb");var a=e("component"),_=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:201a8bcd"),_.subscribe(function(){_i_("a9a:74d30324");var o=_.getState().roomsTable.js_selection,e=o.blockIDs.reduce(function(e,t){return _i_("a9a:30295c20"),"non_refundable"===o.blocks[t].b_cancellation_type?_r_(e+1):_r_(e)},0),t=$(".js-hprt__booking-summary__non-free-wrapper"),a=o.blockIDs.reduce(function(e,t){return _i_("a9a:3be4ddce"),"special_condition"===o.blocks[t].b_cancellation_type?_r_(e+1):_r_(e)},0);if(0<e||0<a){var n=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body"),r=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body_many_non_free_with_free"),i=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body_many_non_free");t.removeClass("g-hidden"),1===o.roomCount?this.$el.html(n):o.blockIDs.length-e-a!=0?this.$el.html(r):this.$el.html(i),$(".continue_header").removeClass("g-hidden"),this.$el.removeClass("g-hidden")}else $(".continue_header").addClass("g-hidden"),this.$el.addClass("g-hidden"),t.addClass("g-hidden");_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/conditions",function(e,t,o){_i_("a9a:ca003eef");var a=e("component"),n=e("hotel/store"),r=/^bbasic_\d+$/i;o.exports=a.extend({init:function(){_i_("a9a:55ea9abc"),n.subscribe(function(){_i_("a9a:282dcf90");var e=n.getState().roomsTable.js_selection;if(1!==e.roomCount||e.blocks[e.blockIDs[0]].b_is_fflex_price_point||r.test(e.blockIDs[0]||""))this.$el.html("");else{var t=$('tr[data-block-id="'+e.blockIDs[0]+'"]').find(".hprt-conditions").clone();t.removeClass("hprt-conditions").addClass("hprt-conditions-summary"),t.find(".jq_tooltip").removeClass("jq_tooltip").removeAttr("data-title title"),t.find(".green_condition").removeClass("green_condition"),t.find(".hprt-green-condition").removeClass("hprt-green-condition"),t.find(".hprt-checkmark-condition").removeClass("hprt-checkmark-condition"),t.find(".hprt-special-condition").removeClass("hprt-special-condition"),t.find("svg.hprt-cc-superflex").attr("fill","#383838"),e.blocks[e.blockIDs[0]].b_genius_free_room_upgrade&&t.find(".room-upgrade-condition").css("display","list-item"),this.$el.html("<div><strong>"+B.jstmpl.translations("bp_res_column_details")+"</strong>"+$("<div />").append(t).html()+"</div>")}_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/cta-ticker",function(e,t,o){_i_("a9a:cf257974");var a=e("component"),n=e("jquery");o.exports=a.extend({init:function(){_i_("a9a:9ea0b043");var e=this.$el.find("span"),t=0;setInterval(function(){_i_("a9a:2a47cb69"),n(e.get(t)).fadeOut("slow",function(){_i_("a9a:417af38a"),(t+=1)==e.length&&(t=0),n(e.get(t)).fadeIn("slow"),_r_()}),_r_()},7e3),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/reservation-cta",function(e,t,o){_i_("a9a:a788e437");var a=e("component"),n=e("et"),r=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:406616c8");var a=this.$el.find(".js-reservation-button");r.subscribe(function(){_i_("a9a:ab489b04");var t=r.getState().roomsTable.js_selection,e=t.blockIDs.some(function(e){return _i_("a9a:3c30249e"),_r_(t.blocks[e].b_rate_is_genius)}),o=t.blockIDs.filter(function(e){return _i_("a9a:e976fc2e"),_r_(t.blocks[e].b_genius_free_room_upgrade)});t.blockIDs.some(function(e){return _i_("a9a:261befd3"),_r_(t.blocks[e].b_business_package_match)})&&n.customGoal("VOffSLNULFHOHRCTeMeRGWLEcLcDOJaYO",2),t.blockIDs.some(function(e){return _i_("a9a:bd0710a9"),_r_(t.blocks[e].b_rate_is_cug_business_rate)})&&t.blockIDs.length<2&&(e=!1),o.length&&o.length===t.blockIDs.length?a.html(B.jstmpl.translations("genius_free_room_upgrade_rt_cta")):e?a.html(B.jstmpl.translations("ge_deepen_rt_book_genius_cta")):a.html(B.jstmpl.translations("hp_rt_book_button_reserve")),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/dont-worry",function(e,t,o){_i_("a9a:56755e0d");var a=e("component");o.exports=a.extend({init:function(){if(_i_("a9a:9aa1ad13"),this.$el.data("alwaysVisible"))return this.$el.text(B.jstmpl.translations("bp_dont_worry_message")),_r_();var o=e("hotel/store");o.subscribe(function(){_i_("a9a:d8ae6c1c");var t=o.getState().roomsTable.js_selection,e=t.blockIDs.every(function(e){return _i_("a9a:407283ae"),_r_(t.blocks[e].b_book_now_pay_later)});0<t.roomCount&&e?this.$el.text(B.jstmpl.translations("bp_dont_worry_message")):this.$el.text(""),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/genius-challenge",function(e,t,o){_i_("a9a:724a462a");var a=e("component"),n=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:eb691259"),n.subscribe(function(){_i_("a9a:b41696e8"),n.getState().roomsTable.js_selection.roomCount?this.$el.show():this.$el.hide(),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/fade",function(e,t,o){_i_("a9a:763eb447");var r=e("server-data"),i=e("jquery"),a=e("component"),_=e("hotel/store"),s="hprt-block--genius-room-selected",l="hprt-block--room-selected";o.exports=a.extend({init:function(){_i_("a9a:ec028009"),_.subscribe(function(){_i_("a9a:663986e2");var t=_.getState().roomsTable.js_selection;this.$el.removeClass(l),this.$el.removeClass(s),0<t.roomCount&&(t.blockIDs.some(function(e){return _i_("a9a:98245526"),_r_(1===t.blocks[e].b_rate_is_genius)})&&1===parseInt(r.brand_selected_rooms_genius)?this.$el.addClass(s):this.$el.addClass(l));var e=".roomType--highlight",o=i(".hprt-table").find(".hprt-table-cell.-first");if(o.length&&o.filter(e).length){var a=o.filter(e).find("[name^=RD]");if(a&&a.length&&t.roomIDs&&t.roomIDs.length){var n=a.attr("name").replace("RD","");n&&-1==t.roomIDs.indexOf(n)&&o.removeClass("roomType--highlight hprt-table-cell-roomtype--active")}}_r_()}.bind(this)),_r_()}}),_r_()}),booking.jstmpl("template_reserve_button_tooltip",function(){_i_("a9a:df47d087");var i,_=["\n    <div class='big_tooltip_x'>\n        <h1>","</h1>\n\n        <p>\n            <strong>\n                ","\n                    ",", ","\n                ","\n            </strong>\n            <br />\n        </p>\n\n        <hr/>\n\n        <p>\n            <strong>","/private/bp_dates_num_nights_1/name","</strong><br />\n        </p>\n\n        <p>\n            ","/private/check_in/name",": </span>","\n        </p>\n\n        <p>\n            ","/private/check_out/name","\n        </p>\n    </div>\n\n    <div class='big_tooltip_message'>\n        ","\n          ","/private/genius_free_room_upgrade_rt_applied/name","\n        ","\n            ","/private/ge_boost_hp_rt_reserve_button_hover_nongenius/name","/private/hp_rt_reserve_hover_no_account_2_minutes/name","\n    </div>\n\n    ",'\n            <div class="big_tooltip_message big_tooltip_message__green pay_later">\n                ',"/private/hp_rt_pay_at_property/name","\n            </div>\n        ","\n    ","\n\n"],s=["b_hotel_name","b_room_details","b_name","b_interval","b_checkin_localized_date_with_weekday","b_checkout_localized_date_with_weekday","b_only_genius_room_upgrade_selected","b_user_auth_level","b_all_rooms_have_pay_later","b_is_lightbox"];return _r_(function(e){_i_("a9a:f6a6c7ca");var t="",o=this.fn;t+=[_[0],o.F.html(o.MC(s[0])),_[1]].join("");var a=o.MC(s[1])||[];e.unshift(null);for(var n=1,r=a.length;n<=r;n++)e[0]=a[n-1],t+=[_[2],o.F.html(o.MC(s[2]))].join(""),o.MJ(n==a.length)||(t+=_[3]),t+=_[4];return e.shift(),t+=[_[5],(e.unshift({num_nights:o.MC(s[3])}),i=o.ME(_[6],o.MB,o.MN,o.MO(o.MC(s[3]),null,_[6])),e.shift(),i),_[7],o.ME(_[8],o.MB,o.MN,null),_[9],o.MC(s[4]),_[10],o.ME(_[11],o.MB,o.MN,null),_[9],o.MC(s[5]),_[12]].join(""),o.MD(s[6])?t+=[_[13],o.ME(_[14],o.MB,o.MN,null),_[15]].join(""):o.MD(s[7])?t+=[_[16],o.ME(_[17],o.MB,o.MN,null),_[15]].join(""):t+=[_[16],o.ME(_[18],o.MB,o.MN,null),_[15]].join(""),t+=_[19],o.MK(o.MC(s[9]))&&(t+=_[15],o.MD(s[8])&&(t+=[_[20],o.ME(_[21],o.MB,o.MN,null),_[22]].join("")),t+=_[23]),t+=_[24],_r_(t)})}()),B.define("hotel/rooms-table/reserve-button-tooltip",function(e){_i_("a9a:416d8256");var t=e("jquery"),r=e("hotel/store"),i=t(".js-reservation-button"),_=i.attr("data-title"),s=B.jstmpl("template_reserve_button_tooltip"),l={};r.subscribe(function(){_i_("a9a:65823554");var t=r.getState().roomsTable.js_selection,e=t.roomIDs.map(function(e){return _i_("a9a:ac8eb076"),_r_(t.rooms[e])}),o=t.blockIDs.filter(function(e){return _i_("a9a:d56c8c4a"),_r_(t.blocks[e].b_genius_free_room_upgrade)}),a=o.length&&o.length===t.blockIDs.length;if(i.removeAttr("id").removeAttr("data-tooltip-class"),0<t.roomCount){l={b_hotel_name:B.env.b_hotel_name,b_interval:B.env.b_checkin_checkout_interval,b_checkin_localized_date_with_weekday:B.formatter.date(B.env.b_checkin_date,"date_with_weekday"),b_checkout_localized_date_with_weekday:B.formatter.date(B.env.b_checkout_date,"date_with_weekday"),b_check_in_time_translated:B.env.b_check_in_time_translated,b_check_out_time_translated:B.env.b_check_out_time_translated,b_room_details:e,b_user_auth_level:B.env.auth_level,b_only_genius_room_upgrade_selected:a};var n=s.render(l);i.attr("data-title",n).attr("data-tooltip-class","submit_holder_button_tooltip")}else l={},i.attr("data-title",_);_r_()}),_r_()}),B.define("component/hotel/new-rooms-table/summary/rooms",function(e,t,o){_i_("a9a:34fbf6cf");var a=e("component"),n=e("hotel/utils/rooms-selected-copy"),r=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:c7afc47d"),r.subscribe(function(){_i_("a9a:551d37d4");var e=r.getState().roomsTable.js_selection,t="hprt-reservation-total-price";B.et.track("AdeKbOTIWJFFeSICZYUbfKe")&&(t+=" bui-price-display__value"),0<e.roomCount?(this.$el.html(n(e.roomTypes,e.roomCount)+' <div class="'+t+'">'+e.totalPriceFormatted+"</div>"),this.$el.show()):this.$el.hide(),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/highlighted-facilities",function(e,t,o){_i_("a9a:9582ceac");var a=e("component"),n=e("et");o.exports=a.extend({init:function(){_i_("a9a:c0bc5b9e"),this.$otherFacilities=this.$el.find(".hprt-facilities-others"),this.$accessibleFacilities=this.$el.find(".hprt-accessible-facilities"),this.addEventListeners(),_r_()},addEventListeners:function(){_i_("a9a:a9f775ec");var o=this.$otherFacilities,t=this.$accessibleFacilities;this.$el.on("click","[data-toggler]",function(e){_i_("a9a:49f30bd4"),e.preventDefault();var t=$(e.target);o.toggle("fast",function(){_i_("a9a:a56d8101"),o.is(":visible")?(n.goal("hp_room_facilities_more"),t.text(B.jstmpl.translations("hp_rt_info_collapse"))):(n.goal("hp_room_facilities_less"),t.text(B.jstmpl.translations("hp_rt_loc_more"))),_r_()}),_r_()}),this.$el.on("click","[data-toggler-accessibility]",function(e){_i_("a9a:a210caab"),e.preventDefault(),$(e.currentTarget).toggleClass("accordion-open",!t.is(":visible")),t.toggle("fast"),$(e.currentTarget).blur(),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/unit-reviews",function(e,t,o){_i_("a9a:4bac4061");var a=e("component"),n=e("et");o.exports=a.extend({init:function(){_i_("a9a:d9e37590"),this.$unitScores=this.$el.find(".rt-unit-review-score"),this.addEventListeners(),_r_()},addEventListeners:function(){_i_("a9a:0a390e33");var t,e=this.$unitScores;this.$el.on("mouseenter",e,function(e){_i_("a9a:eb4a49d2"),t=setTimeout(function(){_i_("a9a:a2cf8e63"),n.customGoal("OOFHFfZHQFLFESFDMfQLEHSYO",1),clearTimeout(t),_r_()},2e3),_r_()}),this.$el.on("mouseleave",e,function(e){_i_("a9a:11f3b7f1"),clearTimeout(t),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/select-error-tooltip",function(e,t,o){_i_("a9a:acae9003");var a=e("component"),n=e("jquery"),r=e("hotel/store"),i=e("hotel/redux/actionTypes");o.exports=a.extend({init:function(){_i_("a9a:6270e865");var o=this.$el,a=n(".hprt-nos-select");o.attr("role","alert"),n("#hprt-form").submit(function(e){if(_i_("a9a:9b0552f8"),!r.getState().roomsTable.js_selection.roomCount){e.preventDefault();var t=a.filter(function(e,t){return _i_("a9a:92d8eed6"),_r_(60<t.getBoundingClientRect().top)}).get(0)||a.get(0);o.insertAfter(t),o.show().animate({opacity:1},600),n(".hprt-table-room-select").addClass("hprt-table-cell-select-error"),window.setTimeout(function(){_i_("a9a:645d91c7"),o.animate({opacity:0},600,function(){_i_("a9a:250ddeae"),o.hide(),_r_()}),_r_()},4e3),r.dispatch({type:i.SELECT_ROOM_ERROR}),n("select[name^='nr_rooms_']").attr("disabled",!1)}_r_()}),r.subscribe(function(){_i_("a9a:45872291"),r.getState().roomsTable.js_selection.roomCount&&n(".hprt-table-cell-select-error").removeClass("hprt-table-cell-select-error"),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/select-rooms",function(e,t,o){_i_("a9a:c283d498");var a=e("component"),n=e("hotel/redux/actionTypes"),l=e("et"),c=e("hotel/store"),h=e("component/hotel/new-rooms-table/fit-status"),d=e("jquery"),b=B.require("announce-to-screen-reader"),p=e("hotel/utils/rooms-selected-copy");o.exports=a.extend({init:function(){_i_("a9a:68bd16e5");var r=this.$el,i=r.data("room-id"),_=r.data("block-id"),s=r.parents("tr").find("td").not(":first");r.on("change",function(){var e;if(_i_("a9a:e86ca7d9"),e="1"===r.attr("data-is-fflex-selected")?r.attr("data-other-block-id"):r.attr("data-block-id"),c.dispatch({type:n.SELECT_ROOM,block_id:e,number_of_rooms:parseInt(r.val(),10),is_fflex_selected:r.attr("data-is-fflex-selected")}),1==B.env.b_is_group_search&&h.update(),B.et.track("BKPBOTfdASFNHWbOTdfdQRMFXJaGabaSVZOHYO")){var t=c.getState().roomsTable.js_selection;b.announce(p(t.roomTypes,t.roomCount)+" "+t.totalPriceFormatted)}_r_()}),c.subscribe(function(){_i_("a9a:086922b2");var e=c.getState().roomsTable.js_selection;0<e.roomCount?(l.goal("hp_room_select"),203==+B.env.b_acc_type&&l.goal("hp_hostel_room_select")):0<e.nrSelections&&(l.goal("hp_rt_room_deselect"),203==+B.env.b_acc_type&&l.goal("hp_rt_hostel_room_deselect")),_=r.attr("data-block-id");var t=e.blocks[_];t?(r.val(t.js_nr_selected),t.js_is_highlighted?s.addClass("hprt-block--room-selected"):s.removeClass("hprt-block--room-selected")):s.removeClass("hprt-block--room-selected");var o=e.rooms[i];if(o&&o.b_has_room_inventory){var a=parseInt(r.val(),10),n=parseInt(o.b_blocks[0].b_nr_stays,10)+a-e.roomCountPerRoomID[o.b_id];r.find("option").each(function(){_i_("a9a:4182cbe4"),d(this).prop("disabled",this.value>n),_r_()})}else r.find("option").each(function(){_i_("a9a:759347dd"),d(this).prop("disabled",!1),_r_()});_r_()}.bind(this)),_r_()}}),_r_()}),B.define("hotel/rooms-table",function(e){_i_("a9a:3d9d1bad");var _=e("jquery"),s=e("hotel/store"),a=e("booking-sticker"),t=!1;function o(){_i_("a9a:19a9c38c");var e=new a,t=new a,o={};B.env.b_hp_sticky_offset&&(o.initialOffset=B.env.b_hp_sticky_offset),e.init(".hprt-table thead",".hprt-table",o),B.et.track("BKPBOTfdASFNHWbOTdfdQRMFXJaGabaSVZOHYO")?t.init(".js-hprt-reservation-summary > .reserve-block-js",".js-hprt-reservation-summary",o):t.init(".hprt-table-cell.-last > .hprt-block",".hprt-table-cell.-last",o),_r_()}"hotel"===B.env.b_action&&B.env.b_bookings_owned&&B.env.b_rooms_available_and_soldout&&(0<_(".hprt-table tbody tr").length&&(o(),s.subscribe(function(){_i_("a9a:86af2c2c"),window.setTimeout(a.update,5),window.setTimeout(a.update,10),_r_()}),2===a.stickedElements.length&&(t=!0)),B.events.on("main-tab-opened",function(){_i_("a9a:f36067cd"),t||o(),_r_()})),e("hotel/rooms-table/reserve-button-tooltip"),_("#hprt-form").submit(function(e){var t;_i_("a9a:14d8f73f");var o=s.getState();if(!o.roomsTable.js_selection.roomCount||!o.roomsTable.rooms)return _r_();t=[];for(var a=[],n=0;n<o.roomsTable.rooms.length;n++){for(var r=-1,i=0;i<o.roomsTable.rooms[n].b_blocks.length;i++)o.roomsTable.js_selection.blocks[o.roomsTable.rooms[n].b_blocks[i].b_block_id]&&(r=i);o.roomsTable.rooms[n].b_blocks.some(function(e){return _i_("a9a:ceecf64c"),_r_(o.roomsTable.js_selection.blocks[e.b_block_id])})&&t.push(n+1),-1!=r&&a.push(r+1)}t.length&&_(this).find("input[name=rt_pos_selected]").val(t.join("_")),a.length&&_(this).find("input[name=rt_pos_selected_within_room]").val(a.join("_")),_("select[name^='nr_rooms_']").filter(function(){return _i_("a9a:5b49b831"),_r_(0==_(this).val())}).attr("disabled",!0),_r_()}),_r_()}),B.define("component/hotel/new-rooms-table/summary/genius-room-upgrade",function(e,t,o){_i_("a9a:6ad09232");var a=e("component"),n=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:2de5899f"),n.subscribe(function(){_i_("a9a:fb397e50");var e=n.getState().roomsTable.js_selection,o=0,a=0;1<=e.roomCount?($.each(e.blocks,function(e,t){_i_("a9a:36f29bce"),t.b_genius_free_room_upgrade?o=1:a=1,_r_()}),o&&a?this.$el.html('<div class="urgency_message_red"><strong>'+B.jstmpl.translations("genius_free_room_upgrade_rt_multiple")+"</strong></div>"):this.$el.html("")):this.$el.html(""),_r_()}.bind(this)),_r_()}}),_r_()}),booking.jstmpl("js_hprt_select_room_options",function(){_i_("a9a:0aee1220");var _=["\n    ",'\n    <option value="','">\n\n        ',"\n        ","\n            ","\n                &nbsp;\n            ","\n            &nbsp;&nbsp;&nbsp;\n            (",")\n        ","\n    </option>\n","\n\n","\n"],s=["fe_hprt_block"];return _r_(function(r){_i_("a9a:9dd81f89");var e="",i=this.fn;return e+=_[0],r.unshift({fe_hprt_block:i.MB(s[0])}),e=function(e){_i_("a9a:cd283cce");var t=(i.MC(s[0])||{}).b_stay_prices||[];r.unshift({fe_stay_price:null});for(var o,a=1,n=t.length;a<=n;a++)r[0].fe_stay_price=o=t[a-1],e+=[_[1],i.F.entities((o||{}).b_stays),_[2],(o||{}).b_stays,_[3]].join(""),i.MJ(o.b_price)&&(e+=_[4],i.MJ(o.b_price<10)&&(e+=_[5]),e+=[_[6],(o||{}).b_price,_[7]].join("")),e+=_[8];return r.shift(),e+=_[9],_r_(e)}(e),r.shift(),e+=_[10],_r_(e)})}()),B.require(["jquery","hotel/store","jstmpl"],function(i,_,e){_i_("a9a:59a9458d");var s=e("js_hprt_select_room_options");i("input.flexibility-upgrade").on("change",function(){_i_("a9a:81c09be0");var e=i(this).attr("data-other-block-id"),t=i("select[name='nr_rooms_"+e+"']"),o=t.val();i(this).hasClass("flexible-policy")?(t.attr("data-is-fflex-selected","1"),B.et.customGoal("ZcSIcceNJVTZNZGIGGYBC",3)):t.attr("data-is-fflex-selected","0");var a=i(this).val();t.attr("name","nr_rooms_"+a),t.attr("data-block-id",a),t.attr("data-other-block-id",e);var n,r=(n=_.getState().roomsTable.rooms,_i_("a9a:2a948a92"),_r_(n.reduce(function(t,e){return _i_("a9a:7dbc50af"),e.b_blocks.forEach(function(e){_i_("a9a:c171c2a0"),(t[e.b_block_id]=e).b_fflex_block&&(t[e.b_fflex_block.b_block_id]=e.b_fflex_block),_r_()}),_r_(t)},{})));t.html(s.render({fe_hprt_block:r[a]})),t.val(o),t.trigger("change"),_r_()}),_r_()}),B.define("component/hotel/new-rooms-table/highlighted-row",function(e,t,o){"use strict";_i_("a9a:acc91c53"),booking.jstmpl("hprt_row_highlight_block",function(){_i_("a9a:b3131def");var n,r=["\n        ",'\n<div class="hprt-table-cell__highlight-border">\n\t<div class="hprt-table-cell__highlight-block">\n\t\t\n\t\t<span class="hprt-table-cell__highlight-block-logo">\n\t\t\t',"iconset/briefcase","small","\n\t\t</span>\n\n\t\t\n\t\t","\n\t\t\n\t\t\n\t\t",'\n\t\t\t<span\n\t\t\t\tclass="hprt-table-cell__highlight-block-info"\n\t\t\t\tdata-component="tooltip"\n\t\t\t\tdata-tooltip-text="','"\n\t\t\t>\n\t\t\t\t',"iconset/info_sign","medium","\n\t\t\t<span>\n\t\t","\n\t</div>\n</div>\n","\n    "],i=["fe_content","fe_tooltip"];return _r_(function(e){_i_("a9a:08637e0c");var t,o="",a=this.fn;return o+=r[0],t=o,_i_("a9a:973f0d08"),t+=[r[1],(e.unshift({name:r[2],size:r[3]}),n=a.HELPER("icon",e[0]),e.shift(),n),r[4],a.MC(i[0]),r[5]].join(""),a.MD(i[1])&&(t+=[r[6],a.MC(i[1]),r[7],(e.unshift({name:r[8],size:r[9]}),n=a.HELPER("icon",e[0]),e.shift(),n),r[10]].join("")),t+=r[11],o=_r_(t),o+=r[12],_r_(o)})}());var a=e("component"),n=e("jstmpl"),r=e("jquery");o.exports=a.extend({init:function(){_i_("a9a:5d87ca8d");var e=this;e.$cells=e.$el.find(".js--hprt-table-cell-highlight"),e.createHighlightBlock(),e.$cells.first().prepend(e.$highlightBlock),setTimeout(function(){_i_("a9a:eaf7770f"),e.$cells.addClass("hprt-table-cell--highlight-block-active"),_r_()},1),_r_()},createHighlightBlock:function(){_i_("a9a:7b0d06b2");var e=0;this.$cells.each(function(){_i_("a9a:d90932a2"),e+=r(this).outerWidth(),_r_()}),this.$highlightBlock||(this.$highlightBlock=r(n("hprt_row_highlight_block").render({fe_content:this.$el.data("highlight-content"),fe_tooltip:this.$el.data("highlight-tooltip")})).loadComponents()),this.$highlightBlock.css({width:e}),_r_()}}),_r_()}),B.require("hotel/rooms-table"),_r_();